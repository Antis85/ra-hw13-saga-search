{"version":3,"sources":["actions/actionTypes.js","Skills.js","actions/actionCreators.js","App.js","reducers/skills.js","api/index.js","sagas/index.js","store/index.js","index.js"],"names":["SEARCH_SKILLS_REQUEST","SEARCH_SKILLS_FAILURE","SEARCH_SKILLS_SUCCESS","CHANGE_SEARCH_FIELD","SEARCH_SKILLS_CANCELLED","Skills","useSelector","state","skills","items","loading","error","search","dispatch","useDispatch","hasQuery","trim","type","value","onChange","evt","target","payload","changeSearchField","map","o","name","id","App","initialState","searchSkills","a","params","URLSearchParams","q","fetch","process","response","ok","Error","statusText","json","handleChangeSearchSaga","watchChangeSearchSaga","handleSearchSkillsSaga","watchSearchSkillsSaga","saga","filterChangeSearchAction","action","put","debounce","retry","data","message","takeLatest","spawn","reducer","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b65e1cd8.chunk.js","sourcesContent":["export const SEARCH_SKILLS_REQUEST = 'SEARCH_SKILLS_REQUEST';\nexport const SEARCH_SKILLS_FAILURE = 'SEARCH_SKILLS_FAILURE';\nexport const SEARCH_SKILLS_SUCCESS = 'SEARCH_SKILLS_SUCCESS';\nexport const CHANGE_SEARCH_FIELD = 'CHANGE_SEARCH_FIELD';\nexport const SEARCH_SKILLS_CANCELLED = 'SEARCH_SKILLS_CANCELLED';\n","import React, { Fragment } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  changeSearchField,\n  searchSkillsCanceled,\n} from './actions/actionCreators';\n\nexport default function Skills() {\n  const { items, loading, error, search } = useSelector(\n    (state) => state.skills\n  );\n  const dispatch = useDispatch();\n\n  const handleSearch = (evt) => {\n    const { value } = evt.target;\n    dispatch(changeSearchField(value));\n    if (!value) dispatch(searchSkillsCanceled());\n  };\n\n  const hasQuery = search.trim() !== '';\n  return (\n    <Fragment>\n      <div>\n        <input type=\"search\" value={search} onChange={handleSearch} />\n      </div>\n      {!hasQuery && <div>Type something to search</div>}\n      {hasQuery && loading && <div>searching...</div>}\n      {error ? (\n        <div>Error occured</div>\n      ) : (\n        <ul>\n          {items.map((o) => (\n            <li key={o.id}>{o.name}</li>\n          ))}\n        </ul>\n      )}\n    </Fragment>\n  );\n}\n","import {\n  CHANGE_SEARCH_FIELD,\n  SEARCH_SKILLS_REQUEST,\n  SEARCH_SKILLS_FAILURE,\n  SEARCH_SKILLS_SUCCESS,\n  SEARCH_SKILLS_CANCELLED,\n} from './actionTypes';\n\nexport const searchSkillsRequest = (search) => ({\n  type: SEARCH_SKILLS_REQUEST,\n  payload: { search },\n});\n\nexport const searchSkillsFailure = (error) => ({\n  type: SEARCH_SKILLS_FAILURE,\n  payload: { error },\n});\n\nexport const searchSkillsSuccess = (items) => ({\n  type: SEARCH_SKILLS_SUCCESS,\n  payload: { items },\n});\n\nexport const changeSearchField = (search) => ({\n  type: CHANGE_SEARCH_FIELD,\n  payload: { search },\n});\n\nexport const searchSkillsCanceled = () => ({\n  type: SEARCH_SKILLS_CANCELLED,\n});\n","import React from 'react';\nimport './App.css';\nimport Skills from './Skills';\n\nexport default function App() {\n  return <Skills />;\n}\n","import {\n  SEARCH_SKILLS_REQUEST,\n  SEARCH_SKILLS_FAILURE,\n  SEARCH_SKILLS_SUCCESS,\n  CHANGE_SEARCH_FIELD,\n  SEARCH_SKILLS_CANCELLED,\n} from '../actions/actionTypes';\n\nconst initialState = {\n  items: [],\n  loading: false,\n  error: null,\n  search: '',\n};\n\nexport default function skillsReducer(state = initialState, action) {\n  switch (action.type) {\n    case SEARCH_SKILLS_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case SEARCH_SKILLS_FAILURE:\n      const { error } = action.payload;\n      return {\n        ...state,\n        loading: false,\n        error,\n      };\n    case SEARCH_SKILLS_SUCCESS:\n      const { items } = action.payload;\n      return {\n        ...state,\n        items,\n        loading: false,\n        error: null,\n      };\n    case SEARCH_SKILLS_CANCELLED:\n      return { ...initialState };\n    case CHANGE_SEARCH_FIELD:\n      const { search } = action.payload;\n      return {\n        ...state,\n        search,\n      };\n    default:\n      return state;\n  }\n}\n","export const searchSkills = async (search) => {\n  const params = new URLSearchParams({ q: search });\n  const response = await fetch(\n    `${process.env.REACT_APP_SEARCH_URL_BUILD}?${params}`\n  );\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  return await response.json();\n};\n","import { takeLatest, put, spawn, debounce, retry } from 'redux-saga/effects';\nimport {\n  searchSkillsRequest,\n  searchSkillsSuccess,\n  searchSkillsFailure,\n} from '../actions/actionCreators';\nimport {\n  CHANGE_SEARCH_FIELD,\n  SEARCH_SKILLS_REQUEST,\n  SEARCH_SKILLS_CANCELLED,\n} from '../actions/actionTypes';\nimport { searchSkills } from '../api/index';\n\nfunction filterChangeSearchAction({ type, payload }) {\n  return type === CHANGE_SEARCH_FIELD && payload.search.trim() !== '';\n}\n\n// worker\nfunction* handleChangeSearchSaga(action) {\n  yield put(searchSkillsRequest(action.payload.search));\n}\n\n// watcher\nfunction* watchChangeSearchSaga() {\n  yield debounce(100, filterChangeSearchAction, handleChangeSearchSaga);\n}\n\n// worker\nfunction* handleSearchSkillsSaga({ type, payload }) {\n  try {\n    if (type === SEARCH_SKILLS_REQUEST) {\n      const retryCount = 3;\n      const retryDelay = 1 * 1000; // ms\n      const data = yield retry(\n        retryCount,\n        retryDelay,\n        searchSkills,\n        payload.search\n      );\n      yield put(searchSkillsSuccess(data));\n    }\n  } catch (e) {\n    yield put(searchSkillsFailure(e.message));\n  }\n}\n\n// watcher\nfunction* watchSearchSkillsSaga() {\n  yield takeLatest(\n    [SEARCH_SKILLS_REQUEST, SEARCH_SKILLS_CANCELLED],\n    handleSearchSkillsSaga\n  );\n}\n\nexport default function* saga() {\n  yield spawn(watchChangeSearchSaga);\n  yield spawn(watchSearchSkillsSaga);\n}\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport skillsReducer from '../reducers/skills';\nimport saga from '../sagas';\n\nconst reducer = combineReducers({\n  skills: skillsReducer,\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = createStore(\n  reducer,\n  composeEnhancers(applyMiddleware(sagaMiddleware))\n);\n\nsagaMiddleware.run(saga);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}